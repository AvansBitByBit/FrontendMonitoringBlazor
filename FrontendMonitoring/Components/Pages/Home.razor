@page "/"

<PageTitle>Home</PageTitle>

<MudPaper Class="pa-6 mx-auto mt-12" MaxWidth="600px">
    <MudText Typo="Typo.h4" GutterBottom="true">Welkom bij jouw MudBlazor App!</MudText>
    <MudText Typo="Typo.body1" Class="mb-6">
        Deze applicatie maakt gebruik van MudBlazor voor een moderne en responsive gebruikerservaring.
        Log in of maak een account aan om verder te gaan.
    </MudText>

    <MudStack Row="true" Spacing="2">
        @if (!_loggedIn)
        {
            <MudButton Color="Color.Primary" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.AccountCircle" OnClick="@GoToLogin">
                Login / Register
            </MudButton>
        }
        else
        {
            <MudButton Color="Color.Secondary" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Logout" OnClick="@LogOut">
                Logout
            </MudButton>
        }
    </MudStack>

    <MudDivider Class="my-6" />


</MudPaper>

@code {
    [Inject] NavigationManager Nav { get; set; }
    [Inject] IJSRuntime JS { get; set; }

    private bool _loggedIn;

    protected override async Task OnInitializedAsync()
    {
        _loggedIn = await JS.InvokeAsync<bool>("hasAuthToken");
    }

    private void GoToLogin()
    {
        Nav.NavigateTo("/login");
    }

    private async Task LogOut()
    {
        await JS.InvokeVoidAsync("clearAuthToken");
        _loggedIn = false;
        StateHasChanged();
    }
}
